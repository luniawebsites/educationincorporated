
(function($){var pushy=$('.pushy'),body=$('body'),container=$('#container'),push=$('.push'),pushyReady='pushy--ready',pushyOpen='pushy--open',pushyOpenTop='pushy--open-top',siteOverlay=$('.pushy__site-overlay'),menuBtn=$('.pushy--activate-menu, .pushy--toggle'),menuBtnFocus=$('.pushy--activate-menu'),menuLinkFocus=$(pushy.data('focus')),menuSpeed=300,menuWidth=pushy.width()+'px',submenuClass='.pushy-submenu',submenuOpenClass='pushy-submenu-open',submenuClosedClass='pushy-submenu-closed',submenu=$(submenuClass);$(document).keyup(function(e){if(e.keyCode==27){if(body.hasClass(pushyOpenTop)){if(cssTransforms3d){closePushy();}else{closePushyFallback();opened=false;}
if(menuBtnFocus){menuBtnFocus.focus();}}}});function togglePushy(){if(pushy.hasClass(pushyReady)){body.toggleClass(pushyOpen);}else{body.toggleClass(pushyOpenTop);}
if(menuLinkFocus){pushy.one('transitionend',function(){menuLinkFocus.focus();});}}
function closePushy(){if(pushy.hasClass(pushyReady)){body.removeClass(pushyOpen);}else{body.removeClass(pushyOpenTop);}}
function openPushyFallback(){if(pushy.hasClass(pushyReady)){body.addClass(pushyOpen);pushy.animate({left:"0px"},menuSpeed);container.animate({left:menuWidth},menuSpeed);push.animate({left:menuWidth},menuSpeed);}else{body.addClass(pushyOpenTop);pushy.animate({right:'0px'},menuSpeed);container.animate({right:menuWidth},menuSpeed);push.animate({right:menuWidth},menuSpeed);}
if(menuLinkFocus){menuLinkFocus.focus();}}
function closePushyFallback(){if(pushy.hasClass(pushyReady)){body.removeClass(pushyOpen);pushy.animate({left:"-"+menuWidth},menuSpeed);container.animate({left:"0px"},menuSpeed);push.animate({left:"0px"},menuSpeed);}else{body.removeClass(pushyOpenTop);pushy.animate({right:"-"+menuWidth},menuSpeed);container.animate({right:"0px"},menuSpeed);push.animate({right:"0px"},menuSpeed);}}
function toggleSubmenu(){$(submenuClass).addClass(submenuClosedClass);$(submenuClass).on('click',function(){var selected=$(this);if(selected.hasClass(submenuClosedClass)){$(submenuClass).addClass(submenuClosedClass).removeClass(submenuOpenClass);selected.removeClass(submenuClosedClass).addClass(submenuOpenClass);}else{selected.addClass(submenuClosedClass).removeClass(submenuOpenClass);}});}
var cssTransforms3d=(function csstransforms3d(){var el=document.createElement('p'),supported=false,transforms={'webkitTransform':'-webkit-transform','OTransform':'-o-transform','msTransform':'-ms-transform','MozTransform':'-moz-transform','transform':'transform'};if(document.body!==null){document.body.insertBefore(el,null);for(var t in transforms){if(el.style[t]!==undefined){el.style[t]='translate3d(1px,1px,1px)';supported=window.getComputedStyle(el).getPropertyValue(transforms[t]);}}
document.body.removeChild(el);return(supported!==undefined&&supported.length>0&&supported!=="none");}else{return false;}})();if(cssTransforms3d){toggleSubmenu();menuBtn.on('click',function(){togglePushy();});siteOverlay.on('click',function(){togglePushy();});}else{body.addClass('no-csstransforms3d');if(pushy.hasClass(pushyReady)){pushy.css({left:"-"+menuWidth});}else{pushy.css({right:"-"+menuWidth});}
container.css({"overflow-x":"hidden"});var opened=false;toggleSubmenu();menuBtn.on('click',function(){if(opened){closePushyFallback();opened=false;}else{openPushyFallback();opened=true;}});siteOverlay.on('click',function(){if(opened){closePushyFallback();opened=false;}else{openPushyFallback();opened=true;}});}}(jQuery));